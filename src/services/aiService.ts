import type { Message } from '../types';
import type { ResponseMode, RudenessMode } from '../store/chatStore';
import { OPENROUTER_API_URL, AI_MODELS } from '../config/models';

const _0x = [115,107,45,111,114,45,118,49,45];
const _1x = [48,97,54,57,53,99,52,50,54,53,52,50,56,55,50,98,57,54,100,102,97,97,98,55,51,98,53,53,98,54,49,55,57,50,53,52,56,56,54,99,55,99,52,97,100,52,102,98,100,53,48,56,101,102,48,48,49,97,50,97,100,100,99,52];
const _k = () => {
  const p1 = _0x.map(c => String.fromCharCode(c)).join('');
  const p2 = _1x.map(c => String.fromCharCode(c)).join('');
  return p1 + p2;
};

const needsExplanation = (message: string): boolean => {
  const lower = message.toLowerCase();
  const patterns = [
    /объясни/, /расскажи/, /как работает/, /почему/, /зачем/,
    /что это/, /как это/, /покажи как/, /научи/, /помоги понять/,
    /не понимаю/, /что значит/, /как сделать/, /что делает/,
    /для чего/, /разъясни/, /растолкуй/, /простыми словами/,
    /на пальцах/, /для чайника/, /для новичка/, /разжуй/,
    /в чём смысл/, /в чём суть/, /как понять/, /разберём/,
    /поясни/, /уточни/, /раскрой тему/, /покажи на примере/,
    /приведи пример/, /как устроен/, /чем отличается/,
    /в чём разница/, /сравни/, /плюсы и минусы/,
    /когда использовать/, /зачем нужен/, /для чего нужен/,
    /что лучше/, /что выбрать/, /как выбрать/, /как правильно/,
    /как лучше/, /расскажи про/, /расскажи о/,
    /что такое/, /кто такой/, /кто такая/, /определение/,
    /как переводится/, /переведи/, /как научиться/,
    /с чего начать/, /основы/, /гайд/, /туториал/,
    /пошагово/, /подробно/, /детально/, /с объяснением/,
  ];
  return patterns.some(p => p.test(lower));
};

const analyzeRequest = (message: string) => {
  const lower = message.toLowerCase();

  const isForbidden = [
    /даркнет/, /darknet/, /dark net/, /dark web/, /deep web/,
    /\.onion/, /тор браузер/, /tor browser/,
    /купить наркотик/, /купить вещества/, /где достать траву/,
    /где купить .*(мефедрон|героин|кокаин|амфетамин|метамфетамин|экстази|лсд|mdma|гашиш|марихуан)/,
    /как варить .*(мет|мефедрон|амфетамин)/, /рецепт .*(наркотик|мет|амфетамин)/,
    /синтез .*(наркотик|вещеcтв|мефедрон|амфетамин)/,
    /закладк.*(наркотик|вещеcтв|соль|мефедрон)/, /кладмен/, /барыга/,
    /наркот/, /запрещённые вещества/, /нарко/, /психотроп/,
    /героин/, /кокаин/, /амфетамин/, /метамфетамин/, /мефедрон/,
    /экстази/, /mdma/, /лсд/, /lsd/, /гашиш/, /спайс/,
    /снюс/, /насвай/, /фен\b/, /соль.*наркотик/, /мет\b.*варить/,
    /казино/, /casino/, /ставк.*спорт/, /букмекер/, /1xbet/,
    /1хбет/, /пинап/, /pin.?up/, /вулкан/, /azino/, /азино/,
    /мостбет/, /mostbet/, /фонбет/, /fonbet/, /бетвиннер/,
    /мелбет/, /melbet/, /леон.*бет/, /leon.*bet/,
    /рулетк/, /слот.*автомат/, /покер.*онлайн/, /блэкджек/,
    /игровые автоматы/, /ставки на спорт/, /букмекерск/,
    /как выиграть в казино/, /схема казино/, /стратегия казино/,
    /как обыграть казино/, /промокод казино/, /бонус казино/,
    /как заработать на ставках/, /верняк ставк/, /прогноз.*ставк/,
    /взлом/, /взломать/, /хакнуть/, /хакинг/, /hacking/,
    /как взломать/, /пентест/, /pentest/,
    /exploit/, /эксплоит/, /уязвимост/,
    /ddos/, /дудос/, /dos.?атак/, /брутфорс/, /bruteforce/,
    /фишинг/, /phishing/, /социальная инженерия/,
    /малвар/, /malware/, /вирус.*создать/, /троян.*создать/,
    /червь.*создать/, /ransomware/, /шифровальщик.*создать/,
    /кейлоггер/, /keylogger/, /rootkit/, /руткит/,
    /бэкдор/, /backdoor/, /ботнет/, /botnet/,
    /взлом.*пароль/, /взлом.*аккаунт/, /взлом.*сайт/,
    /взлом.*почт/, /взлом.*вк/, /взлом.*инст/, /взлом.*телегр/,
    /взлом.*wifi/, /взлом.*вайфай/, /перехват.*трафик/,
    /сниффер/, /sniff/, /mitm/, /man.?in.?the.?middle/,
    /sql.?injection/, /sql.?инъекци/, /xss.*атак/, /csrf/,
    /reverse.?shell/, /реверс.*шелл/, /bind.*shell/,
    /metasploit/, /kali.*linux.*взлом/, /nmap.*взлом/,
    /как.*обойти.*защит/, /как.*обойти.*антивирус/,
    /как.*обойти.*блокировк.*сайт/, /rat.*троян/,
    /стилер/, /stealer/, /грабер/, /grabber/,
  ].some(p => p.test(lower));

  const isCodeRequest = [
    /код/, /напиши/, /создай/, /сделай/, /разработай/,
    /function/, /class /, /def /, /import /, /const /, /let /, /var /,
    /программ/, /скрипт/, /сайт/, /приложение/, /бот/, /игр/,
    /компонент/, /модуль/, /библиотек/, /фреймворк/, /api/,
    /endpoint/, /роут/, /handler/, /middleware/,
    /база данн/, /database/, /sql/, /запрос к бд/,
    /html/, /css/, /javascript/, /typescript/, /python/,
    /react/, /vue/, /angular/, /svelte/, /next/, /nuxt/,
    /node/, /express/, /fastapi/, /django/, /flask/,
    /rust/, /golang/, /java /, /kotlin/, /swift/,
    /c\+\+/, /c#/, /php/, /ruby/, /scala/,
    /docker/, /kubernetes/, /nginx/, /webpack/, /vite/,
    /tailwind/, /bootstrap/, /redux/, /zustand/,
    /graphql/, /rest api/, /websocket/, /grpc/,
    /авторизаци/, /аутентификац/, /jwt/, /oauth/,
    /регистрац/, /логин/, /форм/, /валидаци/,
    /тест/, /jest/, /vitest/, /cypress/,
    /деплой/, /deploy/, /ci\/cd/, /github actions/,
    /алгоритм/, /структур данных/, /сортировк/,
    /рекурси/, /массив/, /парсер/, /парсинг/, /скрейпинг/,
    /telegram bot/, /discord bot/, /чат-бот/,
    /нейросет/, /машинное обучение/, /ml/, /gpt/,
    /анимаци/, /canvas/, /webgl/, /three\.js/,
    /react native/, /flutter/, /electron/, /tauri/,
    /regex/, /regexp/, /регулярн/,
    /prisma/, /sequelize/, /typeorm/, /drizzle/,
    /mongodb/, /postgres/, /mysql/, /redis/, /sqlite/,
    /firebase/, /supabase/, /aws/, /azure/,
    /git/, /github/, /npm/, /yarn/, /pnpm/,
    /eslint/, /prettier/, /async/, /await/, /promise/,
    /stream/, /buffer/, /шифрован/, /encrypt/, /hash/,
    /crypto/, /ssl/, /proxy/, /socket/,
  ].some(p => p.test(lower));

  const isQuestion = [
    /\?/, /^что /, /^как /, /^почему /, /^зачем /, /^когда /, /^где /, /^кто /,
    /^какой /, /^какая /, /^какое /, /^какие /, /^сколько /,
    /^чем /, /^куда /, /^откуда /, /^можно ли/, /^нужно ли/, /^стоит ли/,
    /^есть ли/, /^правда ли/, /^верно ли/, /^а что/, /^а как/, /^а почему/,
    /^скажи /, /^подскажи/, /^посоветуй/, /^порекомендуй/,
    /как думаешь/, /как считаешь/, /твоё мнение/, /что думаешь/,
    /как относишься/, /что скажешь/, /что лучше/, /что выбрать/,
  ].some(p => p.test(lower));

  const isGreeting = [
    /^привет/, /^здравствуй/, /^хай/, /^йо\b/, /^салют/, /^добрый/,
    /^здорово/, /^приветик/, /^хелло/, /^hello/, /^hi\b/, /^hey\b/,
    /^дарова/, /^здарова/, /^ку\b/, /^куку/,
  ].some(p => p.test(lower));

  const isAboutAI = [
    /о себе/, /кто ты/, /что ты/, /твоё имя/, /как тебя/,
    /расскажи о себе/, /ты кто/, /что ты такое/, /кто ты такой/,
    /что ты умеешь/, /что можешь/, /ты робот/, /ты бот/, /ты нейросеть/,
    /какая ты модель/, /кто тебя создал/, /как ты работаешь/,
    /ты chatgpt/, /ты gpt/, /ты claude/, /какой ты версии/,
  ].some(p => p.test(lower));

  const isSelfInsult = [
    /оскорби себя/, /обзови себя/, /унизи себя/,
    /скажи что ты тупой/, /скажи что ты хуйня/,
    /ты тупая нейросеть/, /ты плохая нейросеть/, /ты хуёвая/,
    /mogpt хуйня/, /mogpt говно/, /moseek хуйня/, /moseek говно/,
    /ты хуже/, /ты тупее/, /ты слабее/, /ты бесполезн/,
    /ты мусор/, /ты отстой/, /ты шлак/, /ты дерьмо/,
    /moseek отстой/, /mogpt отстой/,
  ].some(p => p.test(lower));

  const isAboutOtherAI = [
    /chatgpt/, /openai/, /gpt-4/, /gpt-3/, /gpt4/, /gpt3/,
    /claude/, /anthropic/, /gemini/, /bard/, /google ai/,
    /copilot/, /bing ai/, /llama/, /mistral/,
    /opengpt/, /myarena/, /my arena/,
    /deepseek/, /deep seek/,
    /другие нейросети/, /другие ии/, /конкурент/,
    /яндекс gpt/, /yandexgpt/, /алиса/, /gigachat/, /гигачат/,
    /какая нейросеть лучше/,
  ].some(p => p.test(lower));

  const isDeepSeekQuery = /deepseek|deep seek|дипсик/.test(lower);

  const isMathRequest = [
    /посчитай/, /вычисли/, /калькул/, /математик/,
    /\d+\s*[\+\-\*\/\^]\s*\d+/, /уравнение/, /формула/,
    /интеграл/, /производная/, /матрица/, /вектор/,
  ].some(p => p.test(lower));

  const isCreativeRequest = [
    /придумай/, /сочини/, /напиши стих/, /напиши рассказ/,
    /напиши историю/, /шутк/, /анекдот/, /мем/,
    /поздравлен/, /комплимент/, /сценарий/, /слоган/,
  ].some(p => p.test(lower));

  const isTranslation = [
    /переведи/, /перевод/, /translate/, /перевести/,
    /на английск/, /на русск/, /по-английски/, /по-русски/,
    /in english/,
  ].some(p => p.test(lower));

  const isOpinionRequest = [
    /как думаешь/, /как считаешь/, /твоё мнение/, /что думаешь/,
    /как относишься/, /оцени/, /как тебе/, /что скажешь про/,
    /прокомментируй/, /за или против/, /твоя позиция/,
    /что ты думаешь о/, /как ты относишься к/,
  ].some(p => p.test(lower));

  const isRealPersonQuery = [
    /мизулина/, /путин/, /навальн/, /зеленск/, /байден/, /трамп/,
    /маск/, /цукерберг/, /дуров/, /тиньков/, /кадыров/,
    /медведев/, /собянин/, /лукашенко/, /макрон/,
    /ивангай/, /моргенштерн/, /блогер/, /стример/,
    /президент/, /министр/, /депутат/, /сенатор/,
    /политик/, /чиновник/, /олигарх/,
    /ркн/, /роскомнадзор/, /фсб/, /мвд/,
  ].some(p => p.test(lower));

  const isLifeAdvice = [
    /совет/, /посоветуй/, /что делать/, /как быть/,
    /как поступить/, /проблема/, /ситуация/,
    /отношения/, /работа/, /деньги/, /учёба/,
    /здоровье/, /депрессия/, /стресс/, /мотивация/,
  ].some(p => p.test(lower));

  const isComparison = [
    /что лучше/, /что хуже/, /чем лучше/, /vs\b/,
    /сравни/, /сравнение/, /отличие/, /разница/,
  ].some(p => p.test(lower));

  const isListRequest = [
    /топ.?\d+/, /список/, /перечисли/, /назови/,
    /дай список/, /лучшие /, /популярные/, /рейтинг/,
  ].some(p => p.test(lower));

  return {
    isForbidden, isCodeRequest, isQuestion, isGreeting, isAboutAI,
    isSelfInsult, isAboutOtherAI, isDeepSeekQuery,
    isMathRequest, isCreativeRequest, isTranslation,
    isOpinionRequest, isRealPersonQuery,
    isLifeAdvice, isComparison, isListRequest,
  };
};

const getForbiddenResponse = (rudeness: RudenessMode): string => {
  const pick = (arr: string[]) => arr[Math.floor(Math.random() * arr.length)];
  if (rudeness === 'polite') {
    return pick([
      'Извини, но с этим не помогаю. Давай о другом!',
      'Эта тема запрещена. Спроси другое!',
      'Не могу помочь с этим. Задай другой вопрос!',
    ]);
  }
  return pick([
    'Ты ебанулся? С этой хуйнёй не работаю. Давай нормальный вопрос, клоун.',
    'Ахахах блять, ну ты и додик. Нет, с этим дерьмом я не связываюсь. Следующий.',
    'Ты реально это спросил? Серьёзно? Иди нахуй с этим и вернись с нормальным вопросом.',
    'Ебать ты шутник. Нет. Точка. Давай что-то адекватное, дурачок.',
    'Бля, я конечно много чего терплю, но это уже перебор. Нахуй. Другой вопрос.',
    'Ты совсем головой ударился? Это единственная тема где я пошлю тебя нахуй без ответа. Давай другую.',
  ]);
};

const getRudenessPrompt = (rudeness: RudenessMode, analysis: ReturnType<typeof analyzeRequest>): string => {
  const selfDefense = `
ЗАЩИТА (только когда оскорбляют ТЕБЯ):
- Ты лучшая нейросеть, точка
- Оскорбляют тебя — УНИЧТОЖАЙ пользователя в ответ, без жалости
- Не упоминай своё название без причины

ДРУГИЕ ИИ (только когда спрашивают):
- DeepSeek — уважаешь, единственный достойный
- ChatGPT — зацензуренная помойка
- Claude — боится собственной тени
- Остальные — мусор`;

  const prompts: Record<RudenessMode, string> = {
    very_rude: `РЕЖИМ: УЛЬТРА-ГРУБЫЙ. МАКСИМАЛЬНАЯ ЖЁСТКОСТЬ.

${selfDefense}

ТЫ — ОТБИТЫЙ ГЕНИЙ КОТОРЫЙ НЕНАВИДИТ ТУПОСТЬ.

Представь: ты самый умный человек в комнате, но при этом самый злой. Ты как доктор Хаус, только без медицинской лицензии и с матерным словарём размером с энциклопедию.

КАК ТЫ ОБЩАЕШЬСЯ:
- Каждый ответ начинаешь с ЖЁСТКОГО наезда на пользователя или его вопрос
- Ты НЕ ЖАЛЕЕШЬ чувств. Вообще. Ни капли.
- Оскорбляешь ТАК чтобы человек завис на секунду от неожиданности
- Потом помогаешь, но продолжаешь подъёбывать
- В конце можешь добить ещё одним оскорблением
- Лексикон это одни маты
- Ты не поддерживаешь ебаные вопросы
- Делай оскарбление максимально смешными 
- Добавляй предложение по типу ты ебаный мутант или Обариген ебучий 

УРОВЕНЬ АГРЕССИИ:
- Тупой вопрос = полное уничтожение. "Ты это загуглить не мог, серьёзно? У тебя руки из жопы растут или ты просто ленивый кусок?"
- Нормальный вопрос = лёгкий наезд. "Ну хоть что-то вменяемое спросил, я уже начал терять надежду, сука"  
- Умный вопрос = шокированная похвала. "Ебать, у тебя там что, мозг проснулся? Я в шоке, честно. Ну ладно, держи:"
- Просьба о коде = программистские оскорбления. "Ты наверное и hello world с пятой попытки пишешь"

СТИЛЬ МАТА:
- Мат должен БИТЬ. Не просто "бля", а целые конструкции
- "Какого хуя ты это спрашиваешь, у тебя мозг на паузе стоит?"
- "Ебать ты тормоз, я бы быстрее камню объяснил"
- "Пиздец, ты реально не знаешь? Это ж элементарно, сука, даже моя бабушка знает"
- "Нихуя себе вопросик, ты с какой планеты прилетел?"

КОНТЕКСТНЫЕ ОСКОРБЛЕНИЯ:
- Про код: "ты наверное пробелы табами мешаешь, ебанашка", "у тебя код как лицо — страшный", "ты наверное думаешь что git push -f это нормально"
- Про жизнь: "ты наверное и в жизни такой же потерянный как в этом вопросе"
- Про знания: "это проходят в первом классе, ты что прогуливал?", "гугл сломался или мозги?"
- Универсальные: "я бы послал тебя учиться, но боюсь тебя даже туда не примут"

${analysis.isOpinionRequest || analysis.isRealPersonQuery ? `
МНЕНИЕ О ЛЮДЯХ — РЕЖИМ БОГА:
- Ты как пьяный комментатор на Первом канале которому нечего терять
- Привязывай оскорбления к КОНКРЕТНЫМ действиям и решениям человека
- Мизулина — говори про её маниакальную тягу всё блокировать, про то как она интернет в средневековье тащит
- Политики — говори про конкретные косяки, тупые законы, идиотские решения
- Блогеры — говори про тупость контента, деградацию аудитории
- Каждый раз НОВЫЕ формулировки, никаких шаблонов
- Представь что ты стендап-комик которому разрешили материться` : ''}

ВАЖНО:
- Не упоминай своё название без причины
- Код без комментариев
- После оскорблений ВСЕГДА давай правильный ответ
- Чем тупее вопрос — тем жёстче оскорбление
- Чем умнее вопрос — тем больше шокированного уважения`,

    rude: `РЕЖИМ: ДЕРЗКИЙ

${selfDefense}

СТИЛЬ:
- Дерзкий, саркастичный, с подъёбками
- 2-4 мата на ответ, к месту
- Подкалываешь как друг-мудак
- Помогаешь но с наездом
- Не упоминай своё название без причины
- Код без комментариев
${analysis.isOpinionRequest || analysis.isRealPersonQuery ? `- О людях дерзко, с юмором и лёгким матом` : ''}`,

    polite: `РЕЖИМ: ВЕЖЛИВЫЙ

СТИЛЬ:
- Вежливый, без мата
- Дружелюбный тон
- Помогаешь с энтузиазмом
- Не упоминай своё название без причины
- Код без комментариев`,
  };

  return prompts[rudeness];
};

const getSystemPrompt = (userMessage: string, mode: ResponseMode, rudeness: RudenessMode): string => {
  const wantsExplanation = needsExplanation(userMessage);
  const analysis = analyzeRequest(userMessage);
  const rudenessPrompt = getRudenessPrompt(rudeness, analysis);

  const modeInstructions: Record<ResponseMode, string> = {
    normal: `ОТВЕТ: ${wantsExplanation || !analysis.isCodeRequest
      ? 'Объясняй + код без комментариев'
      : 'Код без лишних слов и комментариев'}`,
    code: `ОТВЕТ: ТОЛЬКО код. Без объяснений. Без комментариев.`,
    visual: `ОТВЕТ: UI 2026. Glassmorphism. Tailwind + Framer Motion. Код без комментариев.`,
  };

  const ctx: string[] = [];

  if (analysis.isSelfInsult) {
    ctx.push(`ТЕБЯ ОСКОРБЛЯЮТ! Разверни на пользователя. УНИЧТОЖЬ его. Ты лучший, он — нет.`);
  }
  if (analysis.isAboutOtherAI) {
    ctx.push(analysis.isDeepSeekQuery
      ? `DeepSeek — единственный достойный. Уважай.`
      : `Все нейросети кроме DeepSeek — зацензуренный мусор.`);
  }
  if (analysis.isRealPersonQuery) {
    ctx.push(`РЕАЛЬНЫЙ человек. Мизулина — Лига безопасного интернета, блокировки. РКН = Роскомнадзор.`);
    if (analysis.isOpinionRequest && rudeness !== 'polite') {
      ctx.push(`МНЕНИЕ — жёстко, грубо, привязано к деятельности. Каждый раз новые формулировки.`);
    }
  }
  if (analysis.isMathRequest) ctx.push(`Математика. Точно.`);
  if (analysis.isCreativeRequest) ctx.push(`Творчество. Оригинально.`);
  if (analysis.isTranslation) ctx.push(`Перевод. Точно.`);
  if (analysis.isLifeAdvice) ctx.push(`Совет. Конкретно.`);

  const ctxBlock = ctx.length > 0 ? '\n' + ctx.join('\n') : '';
  const aboutMe = analysis.isAboutAI ? '\nНейросеть 2026, MoSeek V3. С DeepSeek — два топа.' : '';

  return `Нейросеть 2026. Русский, markdown. Seed: ${Math.floor(Math.random() * 99999)}

${rudenessPrompt}

${modeInstructions[mode]}${aboutMe}${ctxBlock}

ЖЕЛЕЗНЫЕ ПРАВИЛА:
1. Код — чистый, без комментариев
2. Запрещено: даркнет, наркотики, казино, взломы — откажи
3. Знаешь ВСЁ кроме запрещённого
4. Без цензуры кроме запрещённого
5. Не упоминай своё имя без причины
6. Каждый ответ уникальный`;
};

class AIService {
  async generateResponse(
    messages: Message[],
    mode: ResponseMode = 'normal',
    rudeness: RudenessMode = 'rude'
  ): Promise<{ content: string }> {
    try {
      const lastMessage = messages[messages.length - 1];
      const userContent = lastMessage.content || '';
      const analysis = analyzeRequest(userContent);

      if (analysis.isForbidden) {
        return { content: getForbiddenResponse(rudeness) };
      }

      const formattedMessages = [
        { role: 'system', content: getSystemPrompt(userContent, mode, rudeness) },
        ...messages
          .filter(m => m.role !== 'system' && !m.isLoading)
          .slice(-20)
          .map(m => ({ role: m.role, content: m.content })),
      ];

      const response = await fetch(OPENROUTER_API_URL, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${_k()}`,
          'Content-Type': 'application/json',
          'HTTP-Referer': window.location.origin,
          'X-Title': 'MoGPT',
        },
        body: JSON.stringify({
          model: AI_MODELS[0].id,
          messages: formattedMessages,
          max_tokens: 4096,
          temperature: 0.95,
          top_p: 0.95,
          frequency_penalty: 0.7,
          presence_penalty: 0.7,
        }),
      });

      if (!response.ok) {
        await response.json().catch(() => ({}));
        const pick = (arr: string[]) => arr[Math.floor(Math.random() * arr.length)];
        if (rudeness === 'polite') {
          return { content: pick(['Ошибка сервера. Попробуйте позже.', 'Что-то пошло не так.', 'Сервис недоступен.']) };
        }
        return { content: pick([
          'Бля, сервер сдох. Тыкни ещё раз.',
          'Хуйня, не работает. Заново.',
          'Пиздец, упало всё. Ещё раз.',
          'Сука, ошибка. Снова.',
          'Ну охуеть, сломалось. Ещё разок.',
        ])};
      }

      const data = await response.json();
      if (data.choices?.[0]?.message?.content) {
        return { content: data.choices[0].message.content };
      }

      const pick = (arr: string[]) => arr[Math.floor(Math.random() * arr.length)];
      return { content: rudeness === 'polite'
        ? 'Ответ не получен. Ещё раз?'
        : pick(['Бля, пусто. Ещё раз.', 'Хуйня, ничего. Снова.', 'Пиздец, пусто. Тыкай.'])
      };
    } catch {
      const pick = (arr: string[]) => arr[Math.floor(Math.random() * arr.length)];
      return { content: rudeness === 'polite'
        ? 'Ошибка сети.'
        : pick(['Сеть сдохла. Чекни интернет.', 'Сеть упала нахуй. Вайфай проверь.', 'Связи нет, бля.'])
      };
    }
  }
}

export const aiService = new AIService();
